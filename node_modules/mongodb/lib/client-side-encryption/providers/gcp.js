"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
<<<<<<< HEAD
exports.loadGCPCredentials = loadGCPCredentials;
=======
exports.loadGCPCredentials = void 0;
>>>>>>> 89ec911b4f263cb93b444f9f3246f5f69825cb1e
const deps_1 = require("../../deps");
/** @internal */
async function loadGCPCredentials(kmsProviders) {
    const gcpMetadata = (0, deps_1.getGcpMetadata)();
    if ('kModuleError' in gcpMetadata) {
        return kmsProviders;
    }
    const { access_token: accessToken } = await gcpMetadata.instance({
        property: 'service-accounts/default/token'
    });
    return { ...kmsProviders, gcp: { accessToken } };
}
<<<<<<< HEAD
=======
exports.loadGCPCredentials = loadGCPCredentials;
>>>>>>> 89ec911b4f263cb93b444f9f3246f5f69825cb1e
//# sourceMappingURL=gcp.js.map